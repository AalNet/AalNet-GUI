<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<pnml xmlns="http://www.informatik.hu-berlin.de/top/pnml/ptNetb">
<constant name="deadline" value="6"/>
<constant name="delay" value="5"/>
<net active="true" id="Protocol" type="P/T net">
<labels border="true" height="571" positionX="777" positionY="64" width="162">Classical Alternating Bit Protocol with timeouts for resending messages.

In this version of the protocol we use transport arcs to track the timestamp of each message from the point it was sent until it returns as an acknowledgement back to the sender.

The query asks about violation of the synchronization between sender and receiver. The extra number of tokens in the query gives a bound on the total number of messages in transit (i.e. in places Medium_*). This means that TAPAAL provides a suitable underapproximation and verifies the correctness of the protocol upto a given number of extra tokens.

Try to experiment with the values of the constants deadline and delay in order to check for what retransmission rates the protocol remains safe.</labels>
<place id="P0" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Medium_A" nameOffsetX="50.0" nameOffsetY="-5.0" positionX="390.0" positionY="150.0"/>
<place id="P1" initialMarking="1" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Sender_0_A" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="60.0"/>
<place id="P10" initialMarking="0" invariant="&lt;= 2" markingOffsetX="0.0" markingOffsetY="0.0" name="Receiver_1_B" nameOffsetX="107.0" nameOffsetY="32.0" positionX="600.0" positionY="615.0"/>
<place id="P11" initialMarking="1" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Receiver_0_A" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="600.0" positionY="780.0"/>
<place id="P2" initialMarking="0" invariant="&lt;= 6" markingOffsetX="0.0" markingOffsetY="0.0" name="Sender_0_B" nameOffsetX="-5.0" nameOffsetY="31.0" positionX="150.0" positionY="240.0"/>
<place id="P3" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Sender_1_A" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="450.0"/>
<place id="P4" initialMarking="0" invariant="&lt;= 6" markingOffsetX="0.0" markingOffsetY="0.0" name="Sender_1_B" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="630.0"/>
<place id="P5" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Medium_B" nameOffsetX="44.0" nameOffsetY="0.0" positionX="390.0" positionY="360.0"/>
<place id="P6" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Medium_C" nameOffsetX="48.0" nameOffsetY="4.0" positionX="390.0" positionY="540.0"/>
<place id="P7" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Medium_D" nameOffsetX="44.0" nameOffsetY="0.0" positionX="390.0" positionY="720.0"/>
<place id="P8" initialMarking="0" invariant="&lt;= 2" markingOffsetX="0.0" markingOffsetY="0.0" name="Receiver_0_B" nameOffsetX="110.0" nameOffsetY="33.0" positionX="600.0" positionY="240.0"/>
<place id="P9" initialMarking="0" invariant="&lt; inf" markingOffsetX="0.0" markingOffsetY="0.0" name="Receiver_1_A" nameOffsetX="110.0" nameOffsetY="35.0" positionX="600.0" positionY="450.0"/>
<transition angle="90" id="T0" infiniteServer="false" name="Ack_rec_0" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="360.0" priority="1" timed="true"/>
<transition angle="270" id="T1" infiniteServer="false" name="Send_1" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="540.0" priority="1" timed="true"/>
<transition angle="270" id="T10" infiniteServer="false" name="Ack_send_0" nameOffsetX="110.0" nameOffsetY="31.0" positionX="600.0" positionY="360.0" priority="1" timed="true"/>
<transition angle="270" id="T11" infiniteServer="false" name="Loss_C" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="390.0" positionY="630.0" priority="1" timed="true"/>
<transition angle="270" id="T12" infiniteServer="false" name="Loss_D" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="390.0" positionY="780.0" priority="1" timed="true"/>
<transition angle="0" id="T13" infiniteServer="false" name="ReSend_1" nameOffsetX="63.0" nameOffsetY="50.0" positionX="240.0" positionY="630.0" priority="1" timed="true"/>
<transition angle="0" id="T16" infiniteServer="false" name="Receive_old_1" nameOffsetX="74.0" nameOffsetY="-4.0" positionX="510.0" positionY="615.0" priority="1" timed="true"/>
<transition angle="90" id="T17" infiniteServer="false" name="Ack_send_1" nameOffsetX="108.0" nameOffsetY="33.0" positionX="600.0" positionY="720.0" priority="1" timed="true"/>
<transition angle="270" id="T2" infiniteServer="false" name="Ack_rec_1" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="720.0" priority="1" timed="true"/>
<transition angle="270" id="T3" infiniteServer="false" name="Send_0" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="150.0" positionY="150.0" priority="1" timed="true"/>
<transition angle="270" id="T4" infiniteServer="false" name="Receive_0" nameOffsetX="92.0" nameOffsetY="36.0" positionX="600.0" positionY="150.0" priority="1" timed="true"/>
<transition angle="0" id="T5" infiniteServer="false" name="ReSend_0" nameOffsetX="65.0" nameOffsetY="46.0" positionX="240.0" positionY="240.0" priority="1" timed="true"/>
<transition angle="0" id="T6" infiniteServer="false" name="Receive_old_0" nameOffsetX="90.0" nameOffsetY="-3.0" positionX="495.0" positionY="240.0" priority="1" timed="true"/>
<transition angle="270" id="T7" infiniteServer="false" name="Loss_A" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="390.0" positionY="240.0" priority="1" timed="true"/>
<transition angle="270" id="T8" infiniteServer="false" name="Loss_B" nameOffsetX="-5.0" nameOffsetY="35.0" positionX="390.0" positionY="450.0" priority="1" timed="true"/>
<transition angle="270" id="T9" infiniteServer="false" name="Receive_1" nameOffsetX="89.0" nameOffsetY="31.0" positionX="600.0" positionY="540.0" priority="1" timed="true"/>
<arc id="P0 to T7" inscription="[0,inf)" source="P0" target="T7" type="timed">
<arcpath arcPointType="false" id="0" xCoord="402" yCoord="176"/>
<arcpath arcPointType="false" id="1" xCoord="402" yCoord="247"/>
</arc>
<arc id="P11 to T16" inscription="[0,inf)" source="P11" target="T16" type="timed">
<arcpath arcPointType="false" id="0" xCoord="604" yCoord="779"/>
<arcpath arcPointType="false" id="1" xCoord="522" yCoord="642"/>
</arc>
<arc id="P11 to T4" inscription="[0,inf)" source="P11" target="T4" type="timed">
<arcpath arcPointType="false" id="0" xCoord="626" yCoord="794"/>
<arcpath arcPointType="false" id="1" xCoord="676" yCoord="801"/>
<arcpath arcPointType="false" id="2" xCoord="725" yCoord="800"/>
<arcpath arcPointType="false" id="3" xCoord="725" yCoord="140"/>
<arcpath arcPointType="false" id="4" xCoord="651" yCoord="139"/>
<arcpath arcPointType="false" id="5" xCoord="612" yCoord="157"/>
</arc>
<arc id="P1 to T3" inscription="[0,inf)" source="P1" target="T3" type="timed">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="86"/>
<arcpath arcPointType="false" id="1" xCoord="162" yCoord="157"/>
</arc>
<arc id="P2 to T0" inscription="[0,inf)" source="P2" target="T0" type="timed">
<arcpath arcPointType="false" id="0" xCoord="161" yCoord="266"/>
<arcpath arcPointType="false" id="1" xCoord="161" yCoord="366"/>
</arc>
<arc id="P2 to T5" inscription="[delay,deadline]" source="P2" target="T5" type="timed">
<arcpath arcPointType="false" id="0" xCoord="175" yCoord="246"/>
<arcpath arcPointType="false" id="1" xCoord="215" yCoord="230"/>
<arcpath arcPointType="false" id="2" xCoord="247" yCoord="247"/>
</arc>
<arc id="P3 to T1" inscription="[0,inf)" source="P3" target="T1" type="timed">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="476"/>
<arcpath arcPointType="false" id="1" xCoord="162" yCoord="547"/>
</arc>
<arc id="P4 to T13" inscription="[delay,deadline]" source="P4" target="T13" type="timed">
<arcpath arcPointType="false" id="0" xCoord="175" yCoord="636"/>
<arcpath arcPointType="false" id="1" xCoord="215" yCoord="620"/>
<arcpath arcPointType="false" id="2" xCoord="247" yCoord="637"/>
</arc>
<arc id="P4 to T2" inscription="[0,inf)" source="P4" target="T2" type="timed">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="656"/>
<arcpath arcPointType="false" id="1" xCoord="162" yCoord="727"/>
</arc>
<arc id="P5 to T0" inscription="[0,3]" source="P5" target="T0" type="timed">
<arcpath arcPointType="false" id="0" xCoord="387" yCoord="372"/>
<arcpath arcPointType="false" id="1" xCoord="176" yCoord="372"/>
</arc>
<arc id="P5 to T8" inscription="[0,inf)" source="P5" target="T8" type="timed">
<arcpath arcPointType="false" id="0" xCoord="402" yCoord="386"/>
<arcpath arcPointType="false" id="1" xCoord="402" yCoord="457"/>
</arc>
<arc id="P6 to T11" inscription="[0,inf)" source="P6" target="T11" type="timed">
<arcpath arcPointType="false" id="0" xCoord="402" yCoord="566"/>
<arcpath arcPointType="false" id="1" xCoord="402" yCoord="637"/>
</arc>
<arc id="P7 to T12" inscription="[0,inf)" source="P7" target="T12" type="timed">
<arcpath arcPointType="false" id="0" xCoord="402" yCoord="746"/>
<arcpath arcPointType="false" id="1" xCoord="402" yCoord="787"/>
</arc>
<arc id="P7 to T2" inscription="[0,3]" source="P7" target="T2" type="timed">
<arcpath arcPointType="false" id="0" xCoord="387" yCoord="731"/>
<arcpath arcPointType="false" id="1" xCoord="177" yCoord="731"/>
</arc>
<arc id="P9 to T6" inscription="[0,inf)" source="P9" target="T6" type="timed">
<arcpath arcPointType="false" id="0" xCoord="604" yCoord="448"/>
<arcpath arcPointType="false" id="1" xCoord="507" yCoord="267"/>
</arc>
<arc id="P9 to T9" inscription="[0,inf)" source="P9" target="T9" type="timed">
<arcpath arcPointType="false" id="0" xCoord="612" yCoord="476"/>
<arcpath arcPointType="false" id="1" xCoord="612" yCoord="547"/>
</arc>
<arc id="T0 to P3" inscription="1" source="T0" target="P3" type="normal">
<arcpath arcPointType="false" id="0" xCoord="161" yCoord="376"/>
<arcpath arcPointType="false" id="1" xCoord="161" yCoord="447"/>
</arc>
<arc id="P8 to T10" inscription="[1,2]:1" source="P8" target="T10" type="transport">
<arcpath arcPointType="false" id="0" xCoord="612" yCoord="266"/>
<arcpath arcPointType="false" id="1" xCoord="612" yCoord="367"/>
</arc>
<arc id="T10 to P5" inscription="[1,2]:1" source="T10" target="P5" type="transport">
<arcpath arcPointType="false" id="0" xCoord="597" yCoord="371"/>
<arcpath arcPointType="false" id="1" xCoord="416" yCoord="371"/>
</arc>
<arc id="T10 to P9" inscription="1" source="T10" target="P9" type="normal">
<arcpath arcPointType="false" id="0" xCoord="612" yCoord="377"/>
<arcpath arcPointType="false" id="1" xCoord="612" yCoord="447"/>
</arc>
<arc id="T13 to P4" inscription="1" source="T13" target="P4" type="normal">
<arcpath arcPointType="false" id="0" xCoord="246" yCoord="647"/>
<arcpath arcPointType="false" id="1" xCoord="215" yCoord="695"/>
<arcpath arcPointType="false" id="2" xCoord="172" yCoord="652"/>
</arc>
<arc id="T13 to P6" inscription="1" source="T13" target="P6" type="normal">
<arcpath arcPointType="false" id="0" xCoord="256" yCoord="642"/>
<arcpath arcPointType="false" id="1" xCoord="389" yCoord="559"/>
</arc>
<arc id="P6 to T16" inscription="[0,1]:1" source="P6" target="T16" type="transport">
<arcpath arcPointType="false" id="0" xCoord="414" yCoord="560"/>
<arcpath arcPointType="false" id="1" xCoord="516" yCoord="627"/>
</arc>
<arc id="T16 to P10" inscription="[0,1]:1" source="T16" target="P10" type="transport">
<arcpath arcPointType="false" id="0" xCoord="526" yCoord="627"/>
<arcpath arcPointType="false" id="1" xCoord="597" yCoord="627"/>
</arc>
<arc id="T17 to P11" inscription="1" source="T17" target="P11" type="normal">
<arcpath arcPointType="false" id="0" xCoord="611" yCoord="736"/>
<arcpath arcPointType="false" id="1" xCoord="611" yCoord="777"/>
</arc>
<arc id="P10 to T17" inscription="[1,2]:1" source="P10" target="T17" type="transport">
<arcpath arcPointType="false" id="0" xCoord="611" yCoord="641"/>
<arcpath arcPointType="false" id="1" xCoord="611" yCoord="726"/>
</arc>
<arc id="T17 to P7" inscription="[1,2]:1" source="T17" target="P7" type="transport">
<arcpath arcPointType="false" id="0" xCoord="596" yCoord="732"/>
<arcpath arcPointType="false" id="1" xCoord="417" yCoord="732"/>
</arc>
<arc id="T1 to P4" inscription="1" source="T1" target="P4" type="normal">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="557"/>
<arcpath arcPointType="false" id="1" xCoord="162" yCoord="627"/>
</arc>
<arc id="T1 to P6" inscription="1" source="T1" target="P6" type="normal">
<arcpath arcPointType="false" id="0" xCoord="177" yCoord="551"/>
<arcpath arcPointType="false" id="1" xCoord="387" yCoord="551"/>
</arc>
<arc id="T2 to P1" inscription="1" source="T2" target="P1" type="normal">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="737"/>
<arcpath arcPointType="false" id="1" xCoord="139" yCoord="799"/>
<arcpath arcPointType="false" id="2" xCoord="64" yCoord="799"/>
<arcpath arcPointType="false" id="3" xCoord="64" yCoord="34"/>
<arcpath arcPointType="false" id="4" xCoord="169" yCoord="34"/>
<arcpath arcPointType="false" id="5" xCoord="164" yCoord="57"/>
</arc>
<arc id="T3 to P0" inscription="1" source="T3" target="P0" type="normal">
<arcpath arcPointType="false" id="0" xCoord="177" yCoord="161"/>
<arcpath arcPointType="false" id="1" xCoord="387" yCoord="161"/>
</arc>
<arc id="T3 to P2" inscription="1" source="T3" target="P2" type="normal">
<arcpath arcPointType="false" id="0" xCoord="162" yCoord="167"/>
<arcpath arcPointType="false" id="1" xCoord="162" yCoord="237"/>
</arc>
<arc id="P0 to T4" inscription="[0,1]:1" source="P0" target="T4" type="transport">
<arcpath arcPointType="false" id="0" xCoord="416" yCoord="161"/>
<arcpath arcPointType="false" id="1" xCoord="597" yCoord="161"/>
</arc>
<arc id="T4 to P8" inscription="[0,1]:1" source="T4" target="P8" type="transport">
<arcpath arcPointType="false" id="0" xCoord="612" yCoord="167"/>
<arcpath arcPointType="false" id="1" xCoord="612" yCoord="237"/>
</arc>
<arc id="T5 to P0" inscription="1" source="T5" target="P0" type="normal">
<arcpath arcPointType="false" id="0" xCoord="256" yCoord="252"/>
<arcpath arcPointType="false" id="1" xCoord="389" yCoord="169"/>
</arc>
<arc id="T5 to P2" inscription="1" source="T5" target="P2" type="normal">
<arcpath arcPointType="false" id="0" xCoord="246" yCoord="257"/>
<arcpath arcPointType="false" id="1" xCoord="215" yCoord="305"/>
<arcpath arcPointType="false" id="2" xCoord="172" yCoord="262"/>
</arc>
<arc id="P0 to T6" inscription="[0,1]:1" source="P0" target="T6" type="transport">
<arcpath arcPointType="false" id="0" xCoord="413" yCoord="172"/>
<arcpath arcPointType="false" id="1" xCoord="501" yCoord="252"/>
</arc>
<arc id="T6 to P8" inscription="[0,1]:1" source="T6" target="P8" type="transport">
<arcpath arcPointType="false" id="0" xCoord="511" yCoord="252"/>
<arcpath arcPointType="false" id="1" xCoord="597" yCoord="252"/>
</arc>
<arc id="P6 to T9" inscription="[0,1]:1" source="P6" target="T9" type="transport">
<arcpath arcPointType="false" id="0" xCoord="416" yCoord="551"/>
<arcpath arcPointType="false" id="1" xCoord="597" yCoord="551"/>
</arc>
<arc id="T9 to P10" inscription="[0,1]:1" source="T9" target="P10" type="transport">
<arcpath arcPointType="false" id="0" xCoord="612" yCoord="557"/>
<arcpath arcPointType="false" id="1" xCoord="612" yCoord="612"/>
</arc>
</net>
<query active="true" capacity="7" discreteInclusion="true" extrapolationOption="null" hashTableSize="null" inclusionPlaces="*ALL*" name="Synchronization Violation" query="EF ((Protocol.Sender_0_A&gt;=1 and (Protocol.Receiver_0_B&gt;=1 or Protocol.Receiver_1_A&gt;=1)) or (Protocol.Sender_1_A&gt;=1 and (Protocol.Receiver_0_A&gt;=1 or Protocol.Receiver_1_B&gt;=1)))" reductionOption="VerifyTAPN" searchOption="HEURISTIC" symmetry="true" traceOption="NONE"/>
</pnml>
